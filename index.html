<!DOCTYPE html>
<html>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
function makeBookmarklet() {
	$.post("https://closure-compiler.appspot.com/compile", {"code_url":$("#code_url").val(),"compilation_level":"SIMPLE_OPTIMIZATIONS","output_format":"text","output_info":"compiled_code"}, function(text, obj) {
			if(text.indexOf("(function(") != 0) {
				text = "(function(){"+text+"})()";
			}
			var encodedScript = encodeURIComponent(text);
			var newLink = $("<a></a>");
			newLink.attr("href","javascript:"+encodedScript);
			newLink.text($("#link_title").val())
			$("output").append(newLink);
			$("output").append("<br/><br/>");
	 	}, "text");
}
</script>
<body>
<h1>This will all end in tears</h1>
<br/><br/>
Bookmarklet Generator<br/><br/>
<small>Code is run through closure compiler then wrapped in self-executing function. Next URL encoded, appended to a "javascript:" link, then created</small><br/><br/><br/> 
Url for code: <input type="text" id="code_url" />
Name for Link: <input type="text" id="link_title"/>
<input type="button" onclick="makeBookmarklet()" value="Create"/>
<br/><br/>
<output>
<a href="javascript:(function()%7Bwindow.rabigone%3Dnew%20function()%7Bthis.posts%3D%24(%22a.p-nickname%5Bhref%5E%3D'%2F%40unixrab'%5D%22)%3Bthis.replies%3Dthis.posts.closest(%22.reply%22)%3Bthis.comments%3Dthis.posts.closest(%22.comment%22)%3Bthis.mentions%3D%24(%22*%3Acontains('unixrab')%3Anot(%3Ahas(%3Acontains('unixrab')))%22)%3Bthis.hide%3Dfunction()%7Bthis.replies.hide()%3Bthis.comments.hide()%7D%3Bthis.show%3Dfunction()%7Bthis.replies.show()%3Bthis.comments.show()%7D%3Bthis.goat%3Dfunction(a)%7Ba%3Fthis.mentions.map(function()%7Bthis.innerText%3Dthis.innerText.replace(%22g04t%22%2C%22unixrab%22)%7D)%3Athis.mentions.map(function()%7Bthis.innerText%3D%0Athis.innerText.replace(%22unixrab%22%2C%22g04t%22)%7D)%7D%3Bthis.all%3Dfunction()%7Bthis.hide()%3Bthis.goat()%7D%3Bthis.off%3Dfunction()%7Bthis.show()%3Bthis.goat(!0)%7D%7D%3Bwindow.rabigone.all()%7D)()%3B%0A">Rabigone</a> <a href="javascript:(function(a)%7Bwindow.open(%22https%3A%2F%2Fwebchat.freenode.net%2F%3Fchannels%3Dmeh.com%26nick%3D%22%2B(a%7C%7C%24(%22.authenticated%22).attr(%22title%22))%2C%22_blank%22)%7D)(null)%3B%0A">Irck-meh</a>
</output><br/><br/>
<small>Tears are herein defined as units of monetary value transferable soley from those reading this description to the author. Tears are shed by those consuming the author's work as payment for the obvious emense value of reader being made aware of its existence. </small>
</body>
</html>
